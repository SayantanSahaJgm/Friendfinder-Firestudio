{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user in the FriendFinder app.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user entity."
        },
        "username": {
          "type": "string",
          "description": "User's display name."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "bio": {
          "type": "string",
          "description": "User's profile bio."
        },
        "profilePictureUrl": {
          "type": "string",
          "description": "URL of the user's profile picture.",
          "format": "uri"
        },
        "locationEnabled": {
          "type": "boolean",
          "description": "Indicates whether the user has enabled location sharing."
        },
        "lastLogin": {
          "type": "string",
          "description": "Timestamp of the user's last login.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "username",
        "email"
      ]
    },
    "Post": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Post",
      "type": "object",
      "description": "Represents a post made by a user.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the post entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to the User who created the post."
        },
        "text": {
          "type": "string",
          "description": "Text content of the post."
        },
        "mediaUrl": {
          "type": "string",
          "description": "URL of the media attached to the post (image, video).",
          "format": "uri"
        },
        "timestamp": {
          "type": "string",
          "description": "Timestamp of when the post was created.",
          "format": "date-time"
        },
        "likeIds": {
          "type": "array",
          "description": "References to Likes. (Relationship: Like 1:N Post)",
          "items": {
            "type": "string"
          }
        },
        "commentIds": {
          "type": "array",
          "description": "References to Comments. (Relationship: Comment 1:N Post)",
          "items": {
            "type": "string"
          }
        },
        "user": {
          "type": "object",
          "description": "Denormalized user data for quick display.",
          "properties": {
            "username": { "type": "string" },
            "profilePictureUrl": { "type": "string" }
          }
        }
      },
      "required": [
        "id",
        "userId",
        "text",
        "timestamp",
        "user"
      ]
    },
    "Like": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Like",
      "type": "object",
      "description": "Represents a like on a post.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the like entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to the User who liked the post. (Relationship: User 1:N Like)"
        },
        "postId": {
          "type": "string",
          "description": "Reference to the Post that was liked. (Relationship: Post 1:N Like)"
        },
        "timestamp": {
          "type": "string",
          "description": "Timestamp of when the post was liked.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "userId",
        "postId",
        "timestamp"
      ]
    },
    "Comment": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Comment",
      "type": "object",
      "description": "Represents a comment on a post.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the comment entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to the User who created the comment. (Relationship: User 1:N Comment)"
        },
        "postId": {
          "type": "string",
          "description": "Reference to the Post that the comment belongs to. (Relationship: Post 1:N Comment)"
        },
        "text": {
          "type": "string",
          "description": "Text content of the comment."
        },
        "timestamp": {
          "type": "string",
          "description": "Timestamp of when the comment was created.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "userId",
        "postId",
        "text",
        "timestamp"
      ]
    },
    "Story": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Story",
      "type": "object",
      "description": "Represents a user's story that disappears after 24 hours.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the story entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to the User who created the story. (Relationship: User 1:N Story)"
        },
        "mediaUrl": {
          "type": "string",
          "description": "URL of the media (image/video) in the story.",
          "format": "uri"
        },
        "timestamp": {
          "type": "string",
          "description": "Timestamp of when the story was created.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "userId",
        "mediaUrl",
        "timestamp"
      ]
    },
    "Interest": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Interest",
      "type": "object",
      "description": "Represents a user's interest.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the interest entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the interest (e.g., 'Photography', 'Hiking')."
        },
        "userIDs": {
          "type": "array",
          "description": "References to Users who are interested in the interest. (Relationship: User N:N Interest)",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "name"
      ]
    },
    "FriendRequest": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "title": "Friend Request",
        "type": "object",
        "description": "Represents a friend request between two users.",
        "properties": {
            "id": {
                "type": "string",
                "description": "Unique identifier for the friend request, typically from_to."
            },
            "from": {
                "type": "string",
                "description": "The user ID of the person sending the request."
            },
            "to": {
                "type": "string",
                "description": "The user ID of the person receiving the request."
            },
            "status": {
                "type": "string",
                "enum": ["pending", "accepted", "declined"],
                "description": "The current status of the friend request."
            },
            "createdAt": {
                "type": "string",
                "format": "date-time",
                "description": "Timestamp of when the request was created."
            }
        },
        "required": ["id", "from", "to", "status", "createdAt"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profile data. Uses path-based ownership for private data.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            }
          ]
        }
      },
      {
        "path": "/posts/{postId}",
        "definition": {
          "entityName": "Post",
          "schema": {
            "$ref": "#/backend/entities/Post"
          },
          "description": "Top-level collection for all user posts. This allows for an aggregated feed.",
          "params": [
            {
              "name": "postId",
              "description": "The unique identifier for the post."
            }
          ]
        }
      },
      {
        "path": "/posts/{postId}/likes/{likeId}",
        "definition": {
          "entityName": "Like",
          "schema": {
            "$ref": "#/backend/entities/Like"
          },
          "description": "Stores likes for a specific post.",
          "params": [
            {
              "name": "postId",
              "description": "The unique identifier for the post."
            },
            {
              "name": "likeId",
              "description": "The unique identifier for the like."
            }
          ]
        }
      },
      {
        "path": "/posts/{postId}/comments/{commentId}",
        "definition": {
          "entityName": "Comment",
          "schema": {
            "$ref": "#/backend/entities/Comment"
          },
          "description": "Stores comments for a specific post.",
          "params": [
            {
              "name": "postId",
              "description": "The unique identifier for the post."
            },
            {
              "name": "commentId",
              "description": "The unique identifier for the comment."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/stories/{storyId}",
        "definition": {
          "entityName": "Story",
          "schema": {
            "$ref": "#/backend/entities/Story"
          },
          "description": "Stores user stories. Path-based ownership ensures secure access control.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            },
            {
              "name": "storyId",
              "description": "The unique identifier for the story."
            }
          ]
        }
      },
      {
          "path": "/friendRequests/{requestId}",
          "definition": {
              "entityName": "FriendRequest",
              "schema": {
                  "$ref": "#/backend/entities/FriendRequest"
              },
              "description": "Stores friend requests between users.",
              "params": [{
                  "name": "requestId",
                  "description": "The unique identifier for the friend request."
              }]
          }
      }
    ]
  }
}
